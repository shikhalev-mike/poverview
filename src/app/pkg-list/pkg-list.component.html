<div class="container-fluid h-100 d-flex flex-column p-4">
  <div class="search-bar mb-3">
    <div class="d-flex align-items-center w-50">
      <input
        type="text"
        class="form-control me-2"
        placeholder="Search..."
        [(ngModel)]="searchTerm"
        (input)="filterPackages()"
      >
      <button class="btn btn-outline-secondary" (click)="refreshPackages()">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
          <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
        </svg>
      </button>
    </div>
  </div>

  <div class="scrollable-container flex-grow-1">
    <div *ngIf="filteredPkgs.length === 0" class="text-center text-muted mt-3">
      No packages found.
    </div>
    <div class="row g-3" *ngIf="filteredPkgs.length > 0">
      <div class="col-md-4" *ngFor="let pkg of filteredPkgs">
        <div 
          class="card h-100 package-card" 
          style="cursor: pointer;"
          [class.selected]="pkg === selectedPkg"
          (click)="selectPkg(pkg)"
        >
          <div 
            class="card-header"
            [class.selected-header]="pkg === selectedPkg"
            [class.highlighted-dependency]="isDependency(pkg)"
          >
            <h5 class="card-title">
              <span class="prefix">{{ splitPackageName(pkg.id).prefix }}</span
              ><span class="suffix">{{ splitPackageName(pkg.id).suffix ? '/' + splitPackageName(pkg.id).suffix : '' }}</span>
            </h5>
          </div>
          <div class="card-body">
            <p class="card-text">{{ formatNumber(pkg.weeklyDownloads) }} <span class="download-icon">â†“</span></p>
            <p class="card-text dependency-text">{{ pkg.dependencyCount }} dependencies</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
